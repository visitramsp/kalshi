"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[853],{7365:(e,t,s)=>{s.d(t,{D5:()=>c,DR:()=>o,N4:()=>m,W1:()=>x,YL:()=>n,Z7:()=>i,_R:()=>d,yb:()=>u});var a=s(30),l=s(6417),r=s(6363);let n=async(e,t,s)=>{try{let r=await a.A.get("".concat(l.y.ordersQuoteDetails,"/?questionId=").concat(e,"&outcomeIndex=").concat(t,"&shares=").concat(s));return null==r?void 0:r.data}catch(e){return{success:!1,message:(0,r.u1)(e)}}},c=async(e,t,s)=>{try{let r=await a.A.get("".concat(l.y.quoteByBudget,"/?questionId=").concat(e,"&outcomeIndex=").concat(t,"&budgetGross=").concat(s));return null==r?void 0:r.data}catch(e){return{success:!1,message:(0,r.u1)(e)}}},i=async e=>{try{let t=await a.A.post(l.y.submitOrder,e);return null==t?void 0:t.data}catch(e){return{success:!1,message:(0,r.u1)(e)}}},o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{let s=await a.A.get("".concat(l.y.graphData,"/").concat(e,"/graph").concat(t&&"?interval=".concat(t)));return null==s?void 0:s.data}catch(e){return{success:!1,message:(0,r.u1)(e)}}},d=async(e,t,s)=>{try{let r=await a.A.get("".concat(l.y.commonQuoteSell,"/?questionId=").concat(e,"&outcomeIndex=").concat(t,"&shares=").concat(s));return null==r?void 0:r.data}catch(e){return{success:!1,message:(0,r.u1)(e)}}},u=async e=>{try{let t=await a.A.get("".concat(l.y.leaderBoardMarketList,"/").concat(e,"/?sort=profit"));return null==t?void 0:t.data}catch(e){return{success:!1,message:(0,r.u1)(e)}}},x=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NEW",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"LIMIT";try{let r=await a.A.get("".concat(l.y.getOrders,"/?userId=").concat(e,"&questionId=").concat(t,"&status=").concat(s,"&type=").concat(n));return null==r?void 0:r.data}catch(e){return{success:!1,message:(0,r.u1)(e)}}},m=async e=>{try{let t=await a.A.post("".concat(l.y.cancelOrders,"/").concat(e,"/cancel"));return null==t?void 0:t.data}catch(e){return{success:!1,message:(0,r.u1)(e)}}}},8853:(e,t,s)=>{s.d(t,{A:()=>f});var a=s(5155),l=s(2115),r=s(5239),n=s(7346),c=s(9102),i=s(6031),o=s(1574),d=s(898);function u(e){let{label:t="Market",onSelect:s}=e,[r,n]=(0,l.useState)(!1),[c,i]=(0,l.useState)(t),o=(0,l.useRef)(null);(0,l.useEffect)(()=>{function e(e){o.current&&!o.current.contains(e.target)&&n(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let u=(e,t)=>{i(t),n(!1),null==s||s(e)};return(0,a.jsxs)("div",{ref:o,className:"relative inline-block",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-1 items-center",children:[(0,a.jsx)("span",{className:"text-black dark:text-white text-sm",children:"Order Type :"}),(0,a.jsxs)("button",{onClick:()=>n(e=>!e),"aria-haspopup":"true","aria-expanded":r,className:"flex items-center capitalize justify-between gap-2 text-gray-600 dark:text-gray-300 w-24  rounded text-sm bg-gray-100 dark:bg-[#1a253f] px-3 py-2 hover:dark:bg-[#1e2b4b] hover:bg-gray-50",children:[c,(0,a.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",className:"stroke-gray-700 dark:stroke-gray-300",children:(0,a.jsx)("path",{d:"M6 9l6 6 6-6",fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),r&&(0,a.jsx)("div",{className:"absolute right-0 mt-2 w-36 rounded-lg bg-white dark:bg-[#1a253f]   shadow-xl shadow-black/50 z-20",children:(0,a.jsxs)("div",{role:"menu",className:"flex flex-col py-2 ",children:[(0,a.jsx)(x,{label:"Market",onClick:()=>u("market","market"),children:(0,a.jsx)(d.lHQ,{className:"mt-1 text-yellow-400 "})}),(0,a.jsx)(x,{label:"Limit",onClick:()=>u("limit","limit"),children:(0,a.jsx)(d.RBv,{className:"mt-1 text-blue-500"})})]})})]})}function x(e){let{label:t,onClick:s,children:l}=e;return(0,a.jsxs)("button",{onClick:s,className:"flex items-center gap-3 px-4 py-2 text-sm text-gray-800 dark:text-white  dark:hover:bg-[#26365c]  hover:bg-gray-100",children:[(0,a.jsx)("span",{className:"w-5 h-5",children:l}),(0,a.jsx)("span",{children:t})]})}let m={src:"/_next/static/media/blockimg1.20b37b97.jpg",height:316,width:316,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/2wBDAQoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAVAQEBAAAAAAAAAAAAAAAAAAAFBv/aAAwDAQACEAMQAAAAsgCn/8QAHBAAAQMFAAAAAAAAAAAAAAAAAQADEgQFFiOz/9oACAEBAAE/ALKavEGhHRFzqv/EABkRAAEFAAAAAAAAAAAAAAAAAAABBjSCwv/aAAgBAgEBPwBwz66U/8QAGREAAQUAAAAAAAAAAAAAAAAAAQAGNHLC/9oACAEDAQE/AG5BN8hf/9k=",blurWidth:8,blurHeight:8};var g=s(7365),h=s(1980),b=s(4517),y=s(5379),A=s(5174);function f(e){var t,s,d,x,f,p,N,j,v,w,k,F,C,I,B,S;let{isOpen:E,onClose:Q,rowDetailss:D,orderType:P,option:L,optionIndex:T,fetchOrders:R,handleChangeOrderType:q}=e,[M,$]=(0,l.useState)(""),[U,G]=(0,l.useState)(""),[z,W]=(0,l.useState)(""),[O,Y]=(0,l.useState)("market"),_=localStorage.getItem("balance"),H=localStorage.getItem("token"),{theme:K}=(0,y.D)(),[X,Z]=(0,l.useState)(null),[V,J]=(0,l.useState)({}),[ee,et]=(0,l.useState)(0),[es,ea]=(0,l.useState)({});console.log(O,"types"),(0,l.useEffect)(()=>{"shares"==X&&W(""),"amount"==X&&$("")},[X]),(0,l.useEffect)(()=>{let e=setTimeout(()=>{"shares"===X&&""!==M&&et(Number(M)),"amount"===X&&""!==z&&et(Number(z))},300);return()=>clearTimeout(e)},[M,z,X]);let el=Number(null==D||null==(t=D.question)?void 0:t.id)||(null==D?void 0:D.id),er=(0,l.useCallback)(async()=>{var e,t,s,a,l,r;if("buy"==P){if("shares"==X)try{let s=await (0,g.YL)(el,T,ee);(null==s?void 0:s.success)?(W((null==s||null==(t=s.data)||null==(e=t.grossCost)?void 0:e.toFixed(2))||""),J((null==s?void 0:s.data)||{})):(W(""),J({}))}catch(e){W(""),J({})}if("amount"==X)try{let e=await (0,g.D5)(el,T,ee);(null==e?void 0:e.success)?($((null==e||null==(a=e.data)||null==(s=a.shares)?void 0:s.toFixed(2))||""),J((null==e?void 0:e.data)||{})):($(""),J({}))}catch(e){$(""),J({})}}if("sell"==P)try{let e=await (0,g._R)(el,T,ee);console.log(e,"getCommonQuoteSell"),(null==e?void 0:e.success)?(ea({}),W((null==e||null==(r=e.data)||null==(l=r.fee)?void 0:l.toFixed(2))||""),J((null==e?void 0:e.data)||{})):(ea(e||{}),W(""),J({}))}catch(e){ea({}),W(""),J({})}},[el,T,ee,P,X]);(0,l.useEffect)(()=>{el&&"market"===O&&er()},[er,el,O]);let en=()=>{W(""),$(""),Q()},ec=Number(M)*Number(U)*2/100,ei=Number(M)*Number(U)+ec,eo=Number(M)*Number(U)-ec;console.log(ec,"LimitFee",ei,"minProceedsValue");let ed=async()=>{try{let t=await (0,A.i$)();if(null==t?void 0:t.success){var e;localStorage.setItem("balance",null==t||null==(e=t.data)?void 0:e.balance)}else localStorage.removeItem("balance")}catch(e){localStorage.removeItem("balance")}},eu=async()=>{let e={questionId:el,outcomeIndex:T,side:P,type:O,shares:"limit"===O&&"buy"===P||"limit"===O&&"sell"===P?M:(null==V?void 0:V.shares)||"",..."limit"===O&&"buy"===P?{maxCost:ei}:{},..."limit"===O&&"sell"===P?{minProceeds:eo}:{},timeInForce:"IOC"};console.log(e,"reqBody");try{let t=await (0,g.Z7)(e);(null==t?void 0:t.success)&&(b.Ay.success(t.message||""),"limit"==O&&R(),ed(),en())}catch(e){b.Ay.error("internal server error")}},ex=Number(null==D||null==(d=D.user)||null==(s=d[T])?void 0:s.shares)||0;console.log(typeof ex,"getTotalSharesDetails======"),console.log(ee,"debouncedValue======");let em=null!=(F=null==L||null==(x=L.userPosition)?void 0:x.shares)?F:0;console.log(em,em,"maxShares");let eg=!1;return 0===ee?eg=!0:"buy"===P&&"limit"==O?Number(_)<=Number(ei)&&(eg=!0):"sell"===P&&"limit"==O?Number(M)>=Number((null==L||null==(C=L.userPosition)?void 0:C.shares)||ex)&&(eg=!0):"buy"===P&&"market"==O?Number(_)<=Number(z)&&(eg=!0):Number(M)>=Number(em)&&(eg=!0),(0,a.jsx)(n.A,{open:E,closeAfterTransition:!0,BackdropComponent:c.A,BackdropProps:{timeout:300,sx:{backdropFilter:"blur(10px)",backgroundColor:"dark"==K?"rgba(15, 23, 42, 0.7)":"rgba(255, 255, 255, 0.7)"}},children:(0,a.jsx)(i.A,{in:E,children:(0,a.jsxs)(o.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},className:"bg-white dark:bg-[#0f172a] p-6 lg:p-10 rounded-xl overflow-hidden shadow-lg w-full max-w-[320px] lg:max-w-[430px] outline-none",children:[(0,a.jsx)("button",{onClick:en,className:"absolute top-3 right-3 cursor-pointer text-gray-900 dark:text-gray-200 hover:text-gray-500",children:"âœ•"}),(0,a.jsxs)("div",{className:"flex flex-row gap-2 w-full justify-between mb-0",children:[(0,a.jsx)(r.default,{src:m,alt:"Block",width:60,height:60,className:"rounded-lg max-h-[45px]"}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"text-sm w-[85%] text-black truncate   dark:text-white",children:"string"==typeof(null==D?void 0:D.question)?D.question:null!=(I=null==D||null==(f=D.question)?void 0:f.question)?I:"--"}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-gray-400",children:[(0,a.jsx)("span",{className:"text-sm",children:"Price"})," :",(0,a.jsx)("span",{className:"text-sm",children:Number((null==L?void 0:L.price)||0).toFixed(2)})]})]})]}),(0,a.jsxs)("div",{className:"flex  text-wrap ml-14 mb-3 text-sm   gap-3",children:[(0,a.jsxs)("span",{className:"text-[#0099FF] text-nowrap font-semibold",children:["buy"===P?"Buy":"Sell"," Now"]}),(0,a.jsxs)("span",{className:"text-gray-500 dark:text-gray-400",children:["- ",(null==L?void 0:L.name)||"--"]})]}),(0,a.jsxs)("div",{className:"border-b border-gray-300 mb-4 relative",children:[(0,a.jsx)("div",{className:"absolute right-0 top-0",children:(0,a.jsx)(u,{onSelect:e=>{G(""),$(""),Y(e)}})}),(0,a.jsx)("button",{onClick:()=>{q("buy"),J({}),ea({}),et(0),W(""),$("")},className:"py-2 mr-6 font-medium ".concat("buy"===P?"border-b-2 border-[#0099FF] text-[#0099FF]":"text-gray-600 dark:text-gray-300 cursor-pointer"),children:"Buy"}),(0,a.jsx)("button",{onClick:()=>{q("sell"),ea({}),J({}),et(0),W(""),$("")},className:"py-2 font-medium ".concat("sell"===P?"border-b-2 border-[#0099FF] text-[#0099FF]":"text-gray-600 dark:text-gray-300 cursor-pointer"),children:"Sell"})]}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex flex-col gap-3",children:"limit"===O?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("label",{className:"w-full flex flex-col gap-1",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-400 font-medium",children:["sell"===P?"Sell":"Buy"," at price"]}),(0,a.jsx)("input",{placeholder:"0.00",type:"number",value:U,onChange:e=>G(""===e.target.value?0:Number(e.target.value)),onWheel:e=>e.currentTarget.blur(),className:"w-full px-3 py-2 text-2xl font-semibold text-right bg-transparent border border-gray-300 dark:border-gray-700 rounded-md  text-gray-900 dark:text-gray-100  focus:border-[#0099FF] focus:ring-1 focus:ring-[#0099FF]  outline-none  "})]}),(0,a.jsxs)("label",{className:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700  rounded-md  flex items-center justify-between bg-transparent ",children:[(0,a.jsxs)("div",{className:"flex flex-col leading-tight",children:[(0,a.jsx)("span",{className:"text-xs text-gray-400 font-medium",children:"Quantity of Shares"}),(0,a.jsx)("span",{className:"text-xs text-[#0099FF] font-medium",children:"USD"})]}),(0,a.jsx)("input",{type:"number",placeholder:"0.00",onFocus:()=>Z("shares"),value:M,onChange:e=>$(""===e.target.value?0:Number(e.target.value)),onWheel:e=>e.currentTarget.blur(),className:" w-28 text-2xl font-semibold text-right bg-transparent  border-none outline-none text-gray-900 dark:text-gray-100"})]})]}):"buy"===P?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("label",{className:"w-full p-3 border border-gray-200 rounded-md flex justify-between items-center",children:[(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"block text-sm text-gray-400",children:"Shares"}),(0,a.jsx)("span",{className:"block text-sm text-[#0099FF]",children:"No Interest"})]}),(0,a.jsx)("input",{type:"number",placeholder:"0",value:M,onFocus:()=>Z("shares"),onChange:e=>$(""===e.target.value?0:Number(e.target.value)),onWheel:e=>e.currentTarget.blur(),className:"border-none outline-none text-gray-800 dark:text-gray-300 text-3xl text-right w-56 bg-transparent"})]}),(0,a.jsx)("div",{className:"flex items-center justify-center text-gray-400",children:(0,a.jsx)(h.$xY,{size:25})}),(0,a.jsxs)("label",{className:"w-full p-3 border border-gray-200 rounded-md flex justify-between items-center",children:[(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"block text-sm text-gray-400",children:"Amount"}),(0,a.jsx)("span",{className:"block text-sm text-[#0099FF]",children:"No Interest"})]}),(0,a.jsx)("input",{type:"number",placeholder:"0",value:z,onFocus:()=>Z("amount"),onChange:e=>W(""===e.target.value?"":Number(e.target.value)),onWheel:e=>e.currentTarget.blur(),className:"border-none outline-none text-gray-800 dark:text-gray-300 text-3xl text-right w-56 bg-transparent"})]})]}):(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsxs)("label",{className:"w-full p-3 border ".concat((null==es?void 0:es.success)==!1?"border-red-400":"border-gray-200","  rounded-md flex justify-between items-center"),children:[(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:"block text-sm text-gray-400",children:"Shares"}),(0,a.jsx)("span",{className:"block text-sm text-[#0099FF]",children:"No Interest"})]}),(0,a.jsx)("input",{type:"number",placeholder:"0",min:0,max:null!=(S=null!=(B=null==L||null==(p=L.userPosition)?void 0:p.shares)?B:ex)?S:0,value:M,onFocus:()=>Z("shares"),onChange:e=>{$(Number(e.target.value))},onWheel:e=>e.currentTarget.blur(),className:"border-none outline-none text-gray-800 dark:text-gray-300 text-3xl text-right w-56 bg-transparent"})]})]})}),(0,a.jsxs)("div",{className:"flex flex-row justify-between gap-2 mt-2",children:[" ",(0,a.jsxs)("div",{className:"bg-[#0099FF] font-semibold text-white px-2 py-1 rounded",children:[" ","IOC"," "]}),(0,a.jsx)("div",{className:"text-xs font-normal text-red-500",children:(null==es?void 0:es.message)||""})]}),(0,a.jsxs)("div",{className:"flex text-black py-3 text-sm flex-col gap-2",children:[(0,a.jsx)("div",{className:"text-[#0099FF] font-semibold text-lg",children:"Share Details :"}),"limit"===O&&"buy"==P?(0,a.jsxs)(a.Fragment,{children:[H&&(0,a.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400 font-medium",children:"Available Balance"}),(0,a.jsxs)("span",{className:"text-gray-600 dark:text-gray-300 text-sm font-medium",children:["$ ",Number(_||0).toFixed(2)||0]})]}),(0,a.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400 font-medium",children:"Fee"}),(0,a.jsxs)("span",{className:"dark:text-gray-300",children:["$ ",null==(N=Number(ec||0))?void 0:N.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400 font-medium",children:"Net Cost"}),(0,a.jsxs)("span",{className:"dark:text-gray-300",children:["$ ",(Number(M)*Number(U)||0).toFixed(2)]})]})]}):"limit"===O&&"sell"==P?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"space-y-2  ",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400 font-medium",children:"Total Buy Share"}),(0,a.jsx)("span",{className:"text-gray-800 dark:text-gray-300 font-semibold",children:((null==L||null==(j=L.userPosition)?void 0:j.shares)||ex||0).toFixed(2)})]}),(0,a.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400 font-medium",children:"Fee"}),(0,a.jsxs)("span",{className:"dark:text-gray-300",children:["$ ",0==ec?"":"-"," ",null==(v=Number(ec||0))?void 0:v.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400 font-medium",children:"Receive"}),(0,a.jsxs)("span",{className:"dark:text-gray-300",children:["$ ",Number(eo||0).toFixed(2)]})]})]})}):"buy"===P?(0,a.jsxs)(a.Fragment,{children:[H&&(0,a.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400 font-medium",children:"Available Balance"}),(0,a.jsxs)("span",{className:"text-gray-600 dark:text-gray-300 text-sm font-medium",children:["$ ",Number(_||0).toFixed(2)||0]})]}),(0,a.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400 font-medium",children:"Fee"}),(0,a.jsxs)("span",{className:"dark:text-gray-300",children:["$ ",Number((null==V?void 0:V.fee)||0).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400 font-medium",children:"Net Cost"}),(0,a.jsxs)("span",{className:"dark:text-gray-300",children:["$ ",Number((null==V?void 0:V.netCost)||0).toFixed(2)]})]})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"space-y-2   py-2 ",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400 font-medium",children:"Total Buy Share"}),(0,a.jsx)("span",{className:"text-gray-800 dark:text-gray-300 font-semibold",children:null==(w=(null==L||null==(k=L.userPosition)?void 0:k.shares)||ex||0)?void 0:w.toFixed(2)})]}),(0,a.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400 font-medium",children:"Fee"}),(0,a.jsxs)("span",{className:"dark:text-gray-300",children:["$ ",Number((null==V?void 0:V.fee)||0).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400 font-medium",children:"Receive"}),(0,a.jsxs)("span",{className:"dark:text-gray-300",children:["$"," ",Number((null==V?void 0:V.netProceeds)||0).toFixed(2)]})]})]})})]}),(0,a.jsxs)("button",{disabled:eg,onClick:eu,className:"mt-4 py-3 text-lg text-white font-bold ".concat(eg?"bg-[#62bdfa]":"bg-[#0099FF] hover:bg-[#0099FF]/90 cursor-pointer","  rounded-xl w-full"),children:[(0,a.jsx)("span",{className:"capitalize",children:P||"--"})," ",(0,a.jsx)("span",{className:"text-gray-200",children:"$"})," ",(0,a.jsx)("span",{className:"text-gray-200",children:"limit"===O&&"buy"===P?ei:"limit"===O&&"sell"===P?eo:"buy"==P?Number((null==V?void 0:V.grossCost)||0).toFixed(2):Number((null==V?void 0:V.grossProceeds)||0).toFixed(2)})]})]})]})})})}}}]);